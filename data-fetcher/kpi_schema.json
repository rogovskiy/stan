{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Custom KPI Schema",
  "description": "Schema for custom KPIs (Key Performance Indicators) that are NOT included in standard financial statements. Includes business segment revenues, product-level metrics, geographic breakdowns, user/subscriber metrics, operational metrics, and RSU/compensation metrics.",
  "type": "object",
  "required": ["name", "value", "unit", "context", "source", "group", "frequency"],
  "properties": {
    "name": {
      "type": "string",
      "description": "The name of the KPI (e.g., 'iPhone Revenue', 'Services Revenue', 'Monthly Active Users', 'Cloud Revenue', 'Paid Subscribers'). This also serves as the metric ID for reference in growth_theses.",
      "minLength": 1,
      "examples": [
        "iPhone Revenue",
        "Services Revenue",
        "Mac Revenue",
        "iPad Revenue",
        "Wearables Revenue",
        "Monthly Active Users",
        "Paid Subscribers",
        "Cloud Revenue",
        "Americas Revenue",
        "Europe Revenue",
        "Greater China Revenue"
      ]
    },
    "value": {
      "oneOf": [
        {
          "type": "number"
        },
        {
          "type": "string"
        }
      ],
      "description": "The actual value/measurement for this quarter. Can be a number or string representation (e.g., 50.6, '50.6B', '$50.6 billion')",
      "examples": [50.6, "50.6B", "$50.6 billion", "1.2 billion", "14.5%"]
    },
    "unit": {
      "type": "string",
      "description": "The unit of measurement (e.g., 'millions', 'billions', 'percentage', 'dollars', 'count', '%', '$B')",
      "examples": ["millions", "billions", "percentage", "dollars", "count", "%", "$B"]
    },
    "change": {
      "oneOf": [
        {
          "type": "number"
        },
        {
          "type": "string"
        }
      ],
      "description": "The change from previous quarter or year (if available). Can be a number or string (e.g., 5, '+5%', '5% growth', 'increased 5%')",
      "examples": [5, "+5%", "5% growth", "increased 5%"]
    },
    "change_type": {
      "type": "string",
      "description": "Type of change comparison",
      "enum": ["qoq", "yoy", "sequential"],
      "examples": ["qoq", "yoy"]
    },
    "context": {
      "type": "string",
      "description": "Brief context about what this KPI measures and why it's important",
      "minLength": 1,
      "examples": [
        "Revenue from iPhone sales, including iPhone 15 and iPhone 15 Pro models",
        "Revenue from services including App Store, Apple Music, iCloud, and advertising"
      ]
    },
    "source": {
      "type": "string",
      "description": "The document or section where this KPI was found",
      "minLength": 1,
      "examples": [
        "Q1 2025 Earnings Release",
        "Quarterly Financial Results Table",
        "Management Commentary"
      ]
    },
    "group": {
      "type": "string",
      "description": "Group name to categorize related KPIs together. Use groups like 'Business Segments', 'Product Sales', 'Regional Revenue', 'RSU/Compensation', 'User Metrics', 'Operational Metrics', 'Geographic Breakdown', etc.",
      "enum": [
        "Business Segments",
        "Product Sales",
        "Regional Revenue",
        "RSU/Compensation",
        "User Metrics",
        "Operational Metrics",
        "Geographic Breakdown",
        "Other"
      ],
      "examples": ["Business Segments", "Regional Revenue", "User Metrics"]
    },
    "frequency": {
      "type": "integer",
      "description": "Number of quarters this KPI has been reported. Indicates how consistently this metric has been tracked over time (e.g., 1 = first time reported, 4 = reported for 4 quarters, 12 = reported for 3 years).",
      "minimum": 1,
      "examples": [1, 4, 8, 12]
    }
  },
  "additionalProperties": false
}

